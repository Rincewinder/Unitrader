<?xml version="1.0" encoding="iso-8859-1" ?>
<aiscript name="jlp.unitrader.trade.ship.ranged" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="aiscripts.xsd" version="1"
>
	<params>
		<param name="PageId" default="8570" />
		<param name="range"  />
		<param name="home"  />
		<param name="minbuy" />
		<param name="maxbuy" />
		<param name="minsell" />
		<param name="maxsell" />
		<param name="debugchance" default="0" />
	</params>
	<attention min="unknown">
		<actions>


			<create_list name="$basket" />
			<!--
				
				<find_object groupname="$wares" class="class.container" tag="tag.economy"
				space="player.galaxy" multiple="true" />
				<do_all exact="$wares.count" counter="$Counter">
				<do_if value="@this.ship.cargo.{$wares.{$Counter}}.max" min="1">
				<append_to_list name="$basket" exact="$wares.{$Counter}" />
				<write_to_logbook category="squad"
				text="Player.age + 'have space for
				' + $wares.{$Counter}.name" />
				</do_if>
				</do_all>
		
-->
			<set_value name="this.$trade_failedfindruns" exact="0"  />	

			<do_if value="$range" exact="'ranged'">
				<run_script name="'jlp.unitrader.trade.ship'">
					<param name="PageId" value="$PageId" />
					<param name="range" value="$range" />
					<param name="home" value="$home" />
					<param name="warelist" value="$basket"/>
					<param name="additionalparams" value="[$minsell, $maxsell, $minbuy, $maxbuy]" />
					<param name="debugchance" value="$debugchance" />
				</run_script>
			</do_if>
			<do_else>
				<run_script name="'jlp.unitrader.trade.ship'">
					<param name="PageId" value="$PageId" />
					<param name="range" value="$range" />
					<param name="home" value="$home" />
					<param name="warelist" value="$basket"/>
				</run_script>

			</do_else>

		</actions>
	</attention>
	
</aiscript>
